this.discogsEmbed=this.discogsEmbed||{},this.discogsEmbed.templates=this.discogsEmbed.templates||{},this.discogsEmbed.templates.error=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="container-fluid">\n  <h2>Discogs Embed - Ooooops!</h2>\n  <p>Seems like something went wrong when loading resource with id <code>'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'</code> : ((</p>\n  <p><a href="#" class="reload">Please reload</a>!</p>\n</div>'},useData:!0}),this.discogsEmbed.templates.main=Handlebars.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'      <a href="https://www.discogs.com/artist/'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'" target="_blank">'+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:g,typeof e===f?e.call(a,{name:"name",hash:{},data:d}):e))+"</a>\n"},3:function(a,b,c,d){var e,f='      <ul class="list-inline formats">\n';return e=b.each.call(a,null!=(e=null!=a?a.data:a)?e.formats:e,{name:"each",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"      </ul>\n"},4:function(a,b,c,d){var e,f="        ";return e=b.each.call(a,null!=a?a.descriptions:a,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"\n"},5:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return"<li>"+f(e(a,a))+"</li>"},7:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'    / <a href="https://www.discogs.com/label/'+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.data:a)?e.labels:e)?e[0]:e)?e.id:e,a))+'" target="_blank">'+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.data:a)?e.labels:e)?e[0]:e)?e.name:e,a))+'</a> <span class="cat">('+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.data:a)?e.labels:e)?e[0]:e)?e.catno:e,a))+")</span>\n"},9:function(a,b,c,d){return" collapsed"},11:function(a,b,c,d){return" ellipsed"},13:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=(b.isTrack||a&&a.isTrack||f).call(a,a,{name:"isTrack",hash:{},fn:this.program(14,d),inverse:this.program(18,d),data:d}),null!=e&&(g+=e),g},14:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='      <li class="track">\n        <span class="position">'+i((f=null!=(f=b.position||(null!=a?a.position:a))?f:h,typeof f===g?f.call(a,{name:"position",hash:{},data:d}):f))+"</span>\n";return e=b["if"].call(a,null!=a?a.artists:a,{name:"if",hash:{},fn:this.program(15,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+'        <span class="title">'+i((f=null!=(f=b.title||(null!=a?a.title:a))?f:h,typeof f===g?f.call(a,{name:"title",hash:{},data:d}):f))+'</span>\n        <span class="duration">'+i((f=null!=(f=b.duration||(null!=a?a.duration:a))?f:h,typeof f===g?f.call(a,{name:"duration",hash:{},data:d}):f))+"</span>\n      </li>\n"},15:function(a,b,c,d){var e,f="          ";return e=b.each.call(a,null!=a?a.artists:a,{name:"each",hash:{},fn:this.program(16,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"\n          -\n"},16:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<a href="https://www.discogs.com/artist/'+h((e=null!=(e=b.id||(null!=a?a.id:a))?e:g,typeof e===f?e.call(a,{name:"id",hash:{},data:d}):e))+'" target="_blank">'+h((e=null!=(e=b.name||(null!=a?a.name:a))?e:g,typeof e===f?e.call(a,{name:"name",hash:{},data:d}):e))+"</a>"},18:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'      <li class="heading">'+h((e=null!=(e=b.title||(null!=a?a.title:a))?e:g,typeof e===f?e.call(a,{name:"title",hash:{},data:d}):e))+"</li>\n"},20:function(a,b,c,d){return'    <div class="more">\n      <a href="#">\n        <span class="more-label">more</span>\n        <span class="less-label">less</span>\n      </a>\n    </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression,h=b.helperMissing,i='<header class="discogs-embed-header">\n  <h2>\n';return e=b.each.call(a,null!=(e=null!=a?a.data:a)?e.artists:e,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+="    - <span>"+g(f(null!=(e=null!=a?a.data:a)?e.title:e,a))+'</span>\n    <span class="year">'+g(f(null!=(e=null!=a?a.data:a)?e.year:e,a))+'</span>\n  </h2>\n  <h3 class="media-info">\n    '+g(f(null!=(e=null!=a?a.data:a)?e.country:e,a))+" /\n",e=b["if"].call(a,null!=(e=null!=a?a.data:a)?e.formats:e,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(i+=e),e=b["if"].call(a,null!=(e=null!=a?a.data:a)?e.labels:e,{name:"if",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+='  </h3>\n</header>\n<section class="row discogs-embed-body">\n  <div class=\'col-sm-4\'>\n    <a href="https://www.discogs.com/release/'+g(f(null!=(e=null!=a?a.data:a)?e.id:e,a))+'" target="_blank">\n      <img src="'+g(f(null!=(e=null!=a?a.data:a)?e.image:e,a))+'" class="img-responsive">\n    </a>\n  </div>\n  <div class=\'col-sm-8 tracklist',e=(b.isCollapsed||a&&a.isCollapsed||h).call(a,null!=(e=null!=a?a.data:a)?e.tracklist:e,{name:"isCollapsed",hash:{},fn:this.program(9,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+="'>\n    <ul class=\"list-unstyled",e=(b.isCollapsed||a&&a.isCollapsed||h).call(a,null!=(e=null!=a?a.data:a)?e.tracklist:e,{name:"isCollapsed",hash:{},fn:this.program(11,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+='">\n',e=b.each.call(a,null!=(e=null!=a?a.data:a)?e.tracklist:e,{name:"each",hash:{},fn:this.program(13,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+="    </ul>\n",e=(b.isCollapsed||a&&a.isCollapsed||h).call(a,null!=(e=null!=a?a.data:a)?e.tracklist:e,{name:"isCollapsed",hash:{},fn:this.program(20,d),inverse:this.noop,data:d}),null!=e&&(i+=e),i+'  </div>\n</section>\n<footer class="discogs-embed-footer">\n  <small>\n    This data comes from <a href="https://www.discogs.com" target="_blank">Discogs</a>. Found any error? Go edit <a href="https://www.discogs.com/release/'+g(f(null!=(e=null!=a?a.data:a)?e.id:e,a))+'" target="_blank">the original entry</a>!\n  </small>\n</footer>\n'},useData:!0}),function(a){var b,c,d;d=function(a,b){return function(){return a.apply(b,arguments)}},c={api:{baseUrl:"https://api.discogs.com",extension:""},token:null,imageCacheUrl:"/images/discogs",ui:{collapseThreshold:10}},defaultDiscogsOptions={releaseType:"releases",id:1990898},b=function(b){function e(b,e){var f=this;this.handler=b,a.extend(!0,this,c,e),this.init=d(this.init,this),this.load=d(this.load,this),this.clear=d(this.clear,this),this.expand=d(this.expand,this),this.reload=d(this.reload,this),this._done=d(this._done,this),this._fail=d(this._fail,this),this._always=d(this._always,this),this.templates=window.discogsEmbed.templates,Handlebars.registerHelper("isCollapsed",function(a,b){return a.length>f.ui.collapseThreshold?b.fn(this):null}),Handlebars.registerHelper("isTrack",function(a,b){return"track"==a.type_?b.fn(this):b.inverse(this)});var f=this;this._done=function(a,b,c){a.data.image=f.imageCacheUrl+"/"+a.data.id+".jpeg",f.handler.toggleClass("error",!1).html(f.templates.main({data:a.data})).addClass("loaded")},this._fail=function(){f.handler.toggleClass("error",!0).html(f.templates.error({id:f.discogsData.id}))},this._always=function(){f.handler.toggleClass("loading",!1)}}return e.prototype.expand=function(a){a.preventDefault();var b=this.$tracklist||(this.$tracklist=this.handler.find(".tracklist"));b.toggleClass("collapsed",!b.is(".collapsed")).find("ul").toggleClass("ellipsed",!!b.is(".collapsed"))},e.prototype.reload=function(a){a.preventDefault(),this.load()},e.prototype.load=function(){var b=[this.api.baseUrl,this.discogsData.releaseType,this.discogsData.id].join("/"),c={};return this.token&&(c.token=this.token),"jsonp"==this.requestFormat&&(c.callback="?"),this.handler.toggleClass("loading",!0),a.getJSON(b+this.api.extension,c).done(this._done).fail(this._fail).always(this._always)},e.prototype.init=function(){this.discogsData=a.extend(!0,defaultDiscogsOptions,this.handler.data()),this.handler.on("click",".more",this.expand),this.handler.on("click",".reload",this.reload),this.handler.addClass("discogs-embed"),this.load()},e.prototype.clear=function(){this.handler.off("click")},e}(),a.fn.discogs=function(a){return this.myPluginInstance?this.myPluginInstance.update(a||{}):this.myPluginInstance=new b(this,a||{}),this.myPluginInstance.init(),this.show()}}(jQuery,Handlebars);